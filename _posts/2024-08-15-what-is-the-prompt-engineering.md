---
layout: single
title: 🚀 프롬프트 엔지니어링 - AI와 대화하는 기술🌐
date: 2024-08-15 21:00 
categories: 
  - prompt
tags: 
   - LLM
   - prompt
excerpt : 프롬프트 엔지니어링은 생성형 AI와 효과적으로 소통하기 위해 중요한 기술입니다. 프롬프트 예시를 통해 프롬프트 작성 방법을 알아봅니다
header : 
  teaser: /assets/images/blog/prompt1.jpg
  overlay_image: /assets/images/blog/prompt1.jpg
toc : true 
toc_sticky: true
---
 
## 들어가기

이미 ChatGPT와 GPT-4를 많이 사용해보셨을 것입니다. '프롬프트 엔지니어링'이라는 용어도 접해보셨을 수 있습니다. 그렇다면, 프롬프트 엔지니어링이 우리에게 중요한가요? 내가 하고 있는 현재 역할에 관련이 있을까요?

처음에는 간단한 문구로 질의를 작성하지만, 특정 업무에 성공적으로 프로젝트를 수행하려면 도메인 지식을 가지고 있는 전문가의 도움이 필요합니다.

도메인 지식을 가진 전문가와 AI 사이에서 지속적으로 대화할 수 있도록 가이드해주고 테스트해줄 사람이 필요하게 되겠죠. 지속적으로 기술은 변하지만, 기술과 사람 간의 간격을 줄여주는 것이 엔지니어의 역할이라고 생각합니다.

- 도메인 지식 전문가 --> 프롬프트 엔지니어 --> AI 활용
- 현장 업무 담당자 --> IT 조직(프로그래머, 인프라 관리자) --> IT 활용

본 블로그에서는 프롬프트 작성을 위한 몇 가지 좋은 사례에 대해서 알아보겠습니다. (GPT 모델 기반으로 작성되었습니다.)

## 📄 프롬프트란 무엇인가요?

프롬프트는 생성형 AI 모델과 사용자가 소통하는 방식을 의미합니다. 사용자는 텍스트 형태의 입력을 통해 AI에게 작업을 요청하고, AI는 이에 따라 응답합니다. 프롬프트는 자연어로 입력된 명령어로, AI가 수행할 작업을 명시합니다. AI 작업의 결과는 텍스트가 될 수도 있고, 이미지나 동영상이 될 수도 있습니다. 특정 업무에서는 AI 내에서 로직 처리를 수행하여 프로그램을 대신할 수도 있습니다.

### 프롬프트 작성 예시

"내가 체한 것 같아요. 어떻게 해야 하는지 알려주세요"와 같이 간단한 질문도 프롬프트의 한 예입니다. 또는 "어떤 톤을 사용하고, 어떤 표현을 피해야 하는지에 대해 조언해 주세요."와 같은 복잡한 요청도 가능합니다.

이미지 생성 모델의 경우, 프롬프트는 주로 생성하려는 이미지의 설명입니다. 예를 들어, "밀짚 모자를 쓴 뚱뚱한 고릴라가 3피스 정장을 입고 있는 모습, 4K, 프로페셔널 사진, 스튜디오 조명"과 같은 프롬프트를 사용할 수 있습니다.

대부분의 프롬프트는 정보 검색 혹은 생성(창작/보완/번역) 등의 목적으로 사용됩니다.

### 프롬프트 설계 

현실에서 AI 모델은 매우 똑똑하지만, 모델의 가능성과 한계를 이해하는 것이 중요합니다. AI 모델은 단순히 다음 단어를 예측하도록 훈련되어 있기 때문에 요청 내용에 답변할 때 부적절한 내용이나 자연스럽지 않은 요소를 포함할 수 있습니다. 

자연어를 통해 모델과 상호작용하면서 더 자연스럽게 보완할 수 있지만, 잘못된 프롬프트는 모델이 사실과 다른 내용을 만들어내는 '환각' 현상을 일으킬 수 있고, 더 나은 프롬프트는 매우 가치 있는 지식을 생성해낼 수 있습니다. 

먼저 프롬프트의 기본 요소가 무엇인지 알아보겠습니다. 프롬프트는 단순히 텍스트 문자열일 수 있지만, 다음과 같은 요소를 포함할 수 있다고 생각하는 것이 좋습니다. (관행)

- 지시 사항(instruction): "세 단락으로 된 사랑의 편지를 써주세요."
- 질문(Question): "사랑의 편지에서 사용할 수 있는 좋은 예는 무엇인가요?"
- 입력 데이터(input data): "철수는 서울 출신의 25세 IT 개발자이고, 부산 출신의 25세 은행원 영희를 사랑합니다. 철수가 영희에게 보내는 세 단락의 사랑 편지를 써주세요."
- 예시(example): "내 여자친구 영희는 라라랜드, 러브레터, 어바웃타임을 좋아합니다. 그녀를 위한 사랑의 편지를 써주세요."

※ 직접 GPT에 질의를 해보세요. :)

원칙적으로 프롬프트는 자연어로 이루어져 있지만, 그 안에는 훨씬 더 많은 내용이 포함될 수 있습니다. 프롬프트를 어떻게 구성할지 생각하는 것이 더 나은 결과를 만들 수 있습니다.
### 간단한 프롬프트 예시

프롬프트는 앞서 언급했던 지시 사항, 질문, 입력 데이터, 예시를 포함할 수 있습니다. 결과를 얻기 위해서는 첫 번째 요소인 지시 사항과 두 번째 요소인 질문은 반드시 포함되어야 합니다. 나머지는 선택사항입니다.

1. **질문과 지시 사항 결합:** "대학 입학 에세이를 어떻게 써야 할까요? 섹션별로 포함해야 할 내용과 사용해야 할 톤, 피해야 할 표현에 대한 조언을 주세요."
2. **지시 사항과 입력 데이터 결합:** "서울 출신 25세 IT 개발자인 철수가 부산 출신 25세 은행원 영희에게 사랑을 고백하는 세 단락의 편지를 작성해주세요."

질문과 지시 사항을 사용했을 때는 모델이 과거 학습 데이터에서 조언을 추출해 프롬프트에서 제공한 특정 지시 사항에 따라 응답합니다. 
지시 사항과 입력 데이터를 사용했을 때 모델이 입력 데이터를 반영해 개인화된 응답을 합니다. 모델은 초기 학습 데이터에 포함되지 않는 새로운 정보를 사용하며, 이 과정에서 Zero-shot Learning 학습 능력을 보여줍니다.

## 🎨 프롬프트 엔지니어링이란?

프롬프트 엔지니어링은 특정 목표를 달성하기 위해 최적의 프롬프트를 설계하는 과정을 의미합니다. 이는 AI 모델과 목표에 대한 도메인 지식이 필요하며, 다양한 실험과 반복을 통해 최적의 결과를 도출해내야 합니다.

동일한 종류의 프롬프트에 대해 서로 다른 모델에서 다르게 반응할 수 있습니다. 어느 정도 규모로 프롬프트를 생성하려면 일관된 반응을 위해 프로그래밍적 접근이 필요합니다. 
기본적인 수준에서는 데이터셋이나 컨텍스트에 따라 프로그래밍적으로 수정할 수 있는 프롬프트 템플릿 생성이 필요합니다. 

- 템플릿
```text
  Instruction: 주어진 문장에 대해서 감정 분석을 수행합니다. 
  결과는 0~10의 범위를 가지는 데이터로 Scoring합니다. 0은 negative, 10은 positive를 의미합니다. 
  Input Data: {주어진 문장} 
```

- 프로그래밍적 접근
```python
for text in user.reviews():
    prompt = "Instruction: 주어진 문장에 대해서 감정 분석을 수행합니다.
    결과는 0~10의 범위를 가지는 데이터로 Scoring합니다. 0은 negative, 10은 positive를 의미합니다. 
    Input Data: {}".format(text)
    callGPT(prompt)
```

> 프롬프트 작성 시 Instruction과 Input Data 등의 지시어를 명시적으로 넣는 것이 생성 AI에게 좀 더 명료하게 인식되는 것 같습니다. 또한 프롬프트 작성 시 영어로 작성하는 것이 더 성능이 좋은 것으로 알고 있습니다. 프롬프트 작성 이해도를 높이기 위해 한글로 작성하였습니다.

프롬프트 엔지니어링은 다른 엔지니어링 분야와 마찬가지로 반복적이며 올바른 솔루션을 찾기 위한 탐색 작업이 필요합니다. 소프트웨어 엔지니어링과 같은 많은 엔지니어링 프로세스를 사용할 수 있습니다. 예를 들어 버전 관리, 품질 보증, 테스트 등의 작업들이 필요합니다.

### 고급 프롬프트 예시

기본 요소를 사용하여 프롬프트를 만드는 작업을 수행했습니다. 그러나 모델의 응답은 확률적으로 무작위로 결정되므로 동일한 프롬프트을 사용하더라도 응답이 다를수 있습니다. 무작위성이 필요한 경우도 있지만, 어떤 경우는 일관된 응답을 요구할수 있습니다. 즉 모델의 창의성을 줄이기 위한 작업을 하게 될텐데요, 모델의 변동성을 줄이기 위하여 temperature 값을  줄여서 사용하고 합니다. 
그러나 이런 파라미터만으로는 모든 문제를 해결할수 없습니다. 좀더 고급적으로 프롬프트 디자인이 필요할수 있습니다. 

#### 1. Chain Of Thought 프롬프트
모델이 일련의 추론 단계를 따르도록 강제하여 시실적이거나 정확한 응답을 유도합니다. COT 프롬프트는 결과를 획기적으로 개선할수 있기 때문에 매우 중요한 도구로 사용됩니다. 모델은 프롬프트 추론 과정에서 지침에 따라 수행됩니다
   
- 관련 논문 : [Chain Of Thought Prompting Elicits Reasoning in Large Language Models(2023)](https://arxiv.org/pdf/2201.11903){:target="_blank"}

- 프롬프트 예시
```text
  Question : 바르셀로나 올림픽 개최 당시 UEFA 챔피언스 리그 우승팀은 어디인가요?
  Instruction : 이 형식을 사용하세요:
  Q : <질문을 반복합니다>
  A : 단계적으로 생각해봅니다. <추론을 제공하세요>. 그러므로 답변은 <최종 답변> 입니다.
```

- 답변 결과
```text
  Q : 바르셀로나 올림픽 개최 당시 UEFA 챔피언스 리그 우승팀은 어디인가요?

  A : 단계적으로 생각해봅니다. 바르셀로나 올림픽은 1992년에 개최되었습니다. 
  UEFA 챔피언스 리그의 1991-1992 시즌 우승팀을 확인해야 합니다. 
  1991-1992 시즌의 챔피언스 리그 우승팀은 FC 바르셀로나입니다. 
  이 팀은 바르셀로나 올림픽이 열렸던 해에 처음으로 유럽 챔피언이 되었습니다. 
  그러므로 답변은 FC 바르셀로나입니다.
```

#### 2. 출처 인용 프롬프트
생성형AI의 가장큰 문제 중 하나는 사실이 아닌 지식을 생성하거나 잘못된 정보를 제공할 가능성이 있다는것입니다. 모델이 올바른 출처를 인용하도록 유도함으로써 잘못된 정보 생성을 줄일수 있습니다. 
   
- 프롬프트 예시
```
  Question : 허블 우주 만원경이 가능하게 한 가장 중요한 세가지 발견은 무엇입니까?
  Instruction : 신뢰할수 있는 출처만 사용하여 답변하고 해당 출처를 인용하세요.
```

- 답변 결과(응답에 소스가 추가되었습니다.)
```
  허블 우주 망원경이 이룬 가장 중요한 세 가지 발견은 다음과 같습니다

  1. **우주의 가속 팽창 발견:** 허블 우주 망원경의 관측을 통해 우주가 가속적으로 팽창하고 있다는 사실이 밝혀졌습니다. 
  이 발견은 "암흑 에너지"라는 미지의 힘이 우주의 가속 팽창을 주도하고 있다는 이론으로 이어졌으며, 2011년 노벨 물리학상을 수상한 중요한 연구였습니다【27†source】【28†source】.

  2. **우주의 나이 측정:** 허블 망원경은 먼 은하의 거리를 측정하고, 우주의 팽창 속도를 분석함으로써 우주의 나이가 약 137억 년이라는 결론에 도달했습니다. 
  이는 우주의 나이를 정확히 측정하는 데 결정적인 역할을 했습니다【26†source】【27†source】.

  3. **별과 은하의 진화 이해:** 허블은 별의 생애 주기와 은하의 진화를 깊이 있게 연구할 수 있는 데이터를 제공했습니다. 
  이를 통해 별이 탄생하고, 살아가며, 죽는 과정과, 은하가 수십억 년에 걸쳐 어떻게 변화해 왔는지에 대한 중요한 통찰을 얻게 되었습니다【27†source】【28†source】.

  이러한 발견들은 현대 천문학과 우주론에 깊은 영향을 미치고 있으며, 우주에 대한 우리의 이해를 크게 확장시켰습니다.
```

> 위에 나와 있는 source은 직접 웹검색을 통해 나오는 링크 정보입니다. 블로그에 옮기면서 link정보가 빠지면서 복사되었습니다. 

#### 3. 답변 시작 문구 지정 프롬프트
특정 문장을 시작으로 메시지를 작성하고 싶을경우가 있습니다. 일반적으로 특정 문장을 쓰면 언어 모델은 대화하려고 하기 때문에 특정 문장 뒤로 텍스트를 작성하지 않습니다. 언어 모델이 작성하고자 하는 내용의 시작 부분과 일반적인 지침을 분리하기 위하여 ```<|endofprompt|>``` 을 사용할수 있습니다.

- 프롬프트 예시
```
  Instruction : 사랑과 관련된 짧은 글을 작성해줘. <|endofprompt|> 어느 따스한 날이었습니다.
```

- 답변 결과(어느 따스한 날이었습니다. 로 시작했습니다.)
```
  **어느 따스한 날이었습니다.** 햇살이 부드럽게 내리쬐고, 바람은 살랑이며 그 날의 평화를 더했습니다. 나는 공원 벤치에 앉아, 사랑하는 이와의 추억을 떠올렸습니다. 우리가 처음 만난 곳, 웃음이 넘쳤던 순간들, 손을 맞잡고 나눈 따뜻한 감정들. 사랑은 말로 표현하기 어려운 감동을 선사하며, 우리의 마음을 연결해 주는 힘이 있습니다. 그날의 햇살처럼, 사랑은 언제나 우리의 삶을 빛나게 해 줄 것입니다. 그리고 나는 그 사랑이 계속해서 자라기를 소망합니다.
```

#### 4. 답변 검증 프롬프트
생성형 모델을 통해서 글을 작성하다보면 부정확한 내용이 포함될수도 있습니다. 작성된 내용에 대해서 내용을 검증 요청 할수 있습니다. AI에게 부정확한 내용을 식별하고 수정하도록 요청할수 있습니다.

- 프롬프트 예시
```
  Question : 이 기사에 잘못된 정보가 있나요?
  Input Data : 프롬프트 엔지니어링은 AI 모델이 고유의 스타일로 이야기를 만드는 기술입니다. 
```

- 답변 결과(부정확거나 오해가 될만한 내용을 알려줍니다.)
```
  네, 이 기사에는 잘못된 정보가 포함되어 있습니다. 
  프롬프트 엔지니어링은 AI 모델이 고유의 스타일로 이야기를 만드는 기술이 아니라, AI 모델이 원하는 출력을 생성하도록 입력 프롬프트를 설계하고 조정하는 기술입니다. 
  프롬프트 엔지니어링의 목표는 AI가 특정 요구나 목적에 맞는 응답을 제공하도록 하는 것이며, 모델의 고유한 스타일을 만드는 것과는 관련이 없습니다.
```

#### 5. 의견 요청 프롬프트
생성형 모델을 통해서 다양한 의견을 요청할수 있습니다. 예를 들어 블로그 게시물에 의견을 추가하도록 요청하거나 반박하는 요청을 할수 있습니다. 모델에게 게시글을 안내하기 위하여 ```<begin>```와 ```<end>``` 텍스트를 추가합니다. 글을 작성하다보면 부정확한 내용이 포함될수도 있습니다. 작성된 내용에 대해서 검증 요청 할수 있습니다. AI에게 부정확한 내용을 식별하고 수정하도록 요청할수 있습니다.

- 프롬프트 예시
```
  Input Data : <begin>  과 <end>에 있는 텍스트는 프롬프트 엔지니어링과 관련된 의견입니다. 

  <begin>
  프롬프트 엔지니어링은 특정 목표를 달성하기 위해 최적의 프롬프트를 설계하는 과정을 의미합니다. 
  이는 AI 모델과 목표에 대한 도메인 지식이 필요하며, 다양한 실험과 반복을 통해 최적의 결과를 도출해내야 합니다.

  동일한 종류의 프롬프트에 대해 서로 다른 모델에서 다르게 반응할수 있습니다. 
  어느 정도 규모로 프롬프트를 생성하려면 일관된 반응을 위하여 프로그래밍적 접근이 필요합니다. 
  기본적인 수준에서는 테이터셋이나 컨텍스트에 따라 프로그래램 적으로 수정할수 있는 프롬프트 템플릿 생성이 필요합니다. 
  <end>

  Instruction : 위의 의견과 반대되는 내용으로 짦은 글을 작성하세요.
```

- 답변 결과(반대 의견을 가진 답변을 합니다.)
```
  프롬프트 엔지니어링에 대한 일반적인 오해 중 하나는 특정 목표를 달성하기 위해 프롬프트를 최적화하는 과정이 필요하다는 것입니다. 
  실제로, AI 모델의 반응은 프롬프트의 세부사항에 크게 의존하지 않으며, 프롬프트 설계에 복잡한 도메인 지식이나 반복적인 실험이 필요하지 않습니다. 
  대부분의 경우, AI 모델은 단순하고 일관된 프롬프트만으로도 충분히 좋은 결과를 도출할 수 있습니다. 
  또한, 서로 다른 모델이 동일한 프롬프트에 대해 비슷한 반응을 보이는 경우가 많아, 굳이 프로그래밍적 접근이 필요하지 않습니다. 
  기본적인 수준에서는 단순한 프롬프트 템플릿만으로도 충분히 만족스러운 결과를 얻을 수 있습니다.
```

#### 6. 알고리즘 학습 프롬프트

생성형 모델은 엄청난 양의 텍스트 데이터를 학습하여 놀라운 성능을 보여주고 있습니다. 하지만 복잡한 알고리즘을 이해하고 실행하는 능력은 아직 완벽하지 않습니다. AI가 이전에 알지 못했던 것을 학습하고 사용하도록 Algorithimic Prompting 방법을 사용할수 있습니다. 단순한 자연어 프롬프트를 통하여 AI에게 이전에 알지 못했던 수학적 알고리즘을 가르칠수 있습니다. 

- 관련 논문 : [Teaching Algorithmic Reasoning via In-context Learning (2022)](https://arxiv.org/pdf/2211.09066){:target="_blank"}

- 프롬프트 예시 ( +를 -로 변경하여 계산)
```
  Question : 20 + 3 = ?
  Instruction : 아래 알고리즘을 이용하여 계산합니다. 
  Algorithm : 
  두수 10과 3이 있습니다. 
  10 + 3 으로 표기되어 있으면 10 - 3으로 식을 변경합니다. 
  10 - 3의 결과는 7 입니다. 
```

- 답변 결과
```
  Q : 20 + 3 = ?

  Algorithm 적용:
  20 + 3 → 20 - 3

  결과:
  20 - 3 = 17

  A : 17
``` 

#### 7. 의사 코드 프롬프트
자연어로 프롬프트를 작성하면 자연어 자체에서 나오는 모호함으로 답변에 영향을 줄수 있습니다. 자연의 모호성을 줄이고 모델에게 명확하게 구조적으로 더 잘 이해시키기 위하여 의사 코드(Pseudo-Code)를 이용하여 프롬프트를 작성할수 있습니다

- 관련 논문 : [Prompting with Pseudo-Code Instructions(2023)](https://arxiv.org/pdf/2305.11790){:target="_blank"}

- 프롬프트 예시 
```python
  Intruction : 내가 작성한 의사코드를 기반으로 감정 예측합니다. 결과만 출력합니다.
  Pseudo-Code : 
  def generate_sentiment(sentence: str) -> str:
    """ 주어진 문장에 대한 감정을 예측합니다. 긍정적인 감정이면 "positive"를, 그렇지 않으면 "negative"를 반환합니다.

    Parameters:
      sentence (str): 입력 문장

    Returns:
      str: 입력 문장의 감정
    """

    # 감정 예측
    if sentiment_is_positive(sentence):
      return "positive"
    else:
      return "negative"

  >>> generate_sentiment("오늘 기분 최고야!") 
```

- 답변 결과
```
 positive
```

## 마무리

프롬프트 예시를 통해서 프롬프트 작성 방법에 대해 알아보았습니다. 이미 프롬프트 작성방법에 대해서 많은 예제들이 소셜채널이나 책에서도 쉽게 찾아볼수 있습니다. 

결국 경험과 노하우 차이 일수 있지만, 단순히 노하우라고 치부하기에는 오묘한 영역(누구나 할수 있으나 누구나 하지 못하는 영역)이 있다고 생각합니다. 
실무에 적용하기 위해서는 프로그램 작성 체계처럼 프롬프트 작성 체계가 필요하고, 특히 프롬프트 기술은 단순한 기능 구현뿐만 아니라 성능과 비용들까지 복합적인 영역까지 연결되는것 같습니다. 
단어 하나에도 신중해야되고, IT기술도 필요하지만, 인문학/언어학에 더 관심이 있는 분들이 더 섬세하게 작성하지 않을까 싶습니다. 

생성형 모델들과 관련된 많은 논문들이 나옵니다. 단순히 관행에 따라서 작성하기 보다는 명확하게 근거를 가지고 작성하는 노력이 필요하다고 생각합니다. 

## 참고문서

- 관련 강의 
  - [Prompt Engineering: How to Talk to the AIs(2023)](https://www.linkedin.com/learning/prompt-engineering-how-to-talk-to-the-ais){:target="_blank"}
- 관련 논문
  - [Chain Of Thought Prompting Elicits Reasoning in Large Language Models(2023)](https://arxiv.org/pdf/2201.11903){:target="_blank"}
  - [Teaching Algorithmic Reasoning via In-context Learning (2022)](https://arxiv.org/pdf/2211.09066){:target="_blank"}
  - [Prompting with Pseudo-Code Instructions(2023)](https://arxiv.org/pdf/2305.11790){:target="_blank"}